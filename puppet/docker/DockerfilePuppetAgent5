FROM ubuntu:16.04

# Vari√°veis de Ambiente
# puppet5-release-wheezy.deb
# puppet5-release-focal.deb:
ENV PUPPET_VERSION=5
ENV UBUNTU_CODENAME=xenial
ENV PUPPET_AGENT_VERSION=5.5.1
ENV PUPPET_DEB_FILE=puppet${PUPPET_VERSION}-release-${UBUNTU_CODENAME}.deb
ENV PATH=/opt/puppetlabs/bin:$PATH

RUN apt update && \
    apt install --no-install-recommends -y wget ca-certificates lsb-release dnsutils && \
    wget https://apt.puppetlabs.com/${PUPPET_DEB_FILE} && \
    dpkg -i ${PUPPET_DEB_FILE} && \
    rm puppet5-release-"$UBUNTU_CODENAME".deb && \
    apt update && \
    apt install --no-install-recommends puppet-agent="$PUPPET_AGENT_VERSION"-1"$UBUNTU_CODENAME" -y && \
    apt-get remove --purge -y wget && \
    apt-get autoremove -y && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*
# RUN curl --remote-name --location https://apt.puppetlabs.com/DEB-GPG-KEY-puppet-20250406	
# RUN mv /etc/apt/trusted.gpg.d/puppet-tools-keyring.gpg

#wget dnsutils gpg curl

# RUN apt-key add DEB-GPG-KEY-puppet-20250406	
# RUN wget -O- https://download.newrelic.com/548C16BF.gpg | apt-key add -
# RUN wget https://apt.puppet.com/${PUPPET_DEB_FILE}

COPY docker-entrypoint.sh /docker-entrypoint.sh
ENTRYPOINT [ "sh", "/docker-entrypoint.sh" ]
